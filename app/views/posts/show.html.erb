
<h4 class="deco">投稿の詳細</h4>
<div class="row contents">

		<!--==== アイコンエリア ====-->
		<div class="col-xs-2">
			<%= link_to(@post.user) do %>
			<%= attachment_image_tag(@post.user, :image, :fill, 50, 50, fallback: "no_image.jpg") %><br>
			<% end %>
			</div>

		<!--==== テキストエリア ====-->
		<div class="col-xs-10">

			<div class="row">
				<p><%= @post.body %></p>
				<p><%= @post.opinion %></p>
				</div>

		<!--====  いいね・お気に入り・コメントエリア。ユーザのログイン状態によって処理を変更する ====-->
			<!--====  ログイン済み  ====-->
			<% if user_signed_in? %>
				<div class="row">
					<!-- いいね Ajax -->
					<i id="likes_ajax_<%= @post.id %>">
						<%= render 'likes/like', post: @post %>
						</i>
					<!-- お気に入り Ajax -->
					<i id="favorites_ajax_<%= @post.id %>">
						<%= render 'favorites/favorite', post: @post %>
						</i>
					<!-- 編集する・削除する -->
					<% if @post.user == current_user %>
						<i><%= link_to "編集する", edit_post_path(@post) %>
							<%= link_to "削除する",@post,method: :delete,data: {confirm: "本当に削除してもよろしいですか？"} %>
							</i>
					<% end %>
					</div>

			<!--====  ログインしていない。アイコンを表示するだけ  ====-->
			<% else %>
				<div class="row">
					<i class="glyphicon glyphicon-heart" aria-hidden="true"></i>
					<%= @post.likes.count %>
					<i class="glyphicon glyphicon-star" aria-hidden="true"></i>
					</div>
			<% end %>
		</div>
</div>


<!--========  コメントエリア。限定的にstyleにて余白を調整。 ========-->
<h4 class="deco" style="margin-top: 100px;">コメント <%= @post.comments.count %>件</h4>

<% @post.comments.each do |comment|%>
	<ol>
	<div class="row contents">
		<li>
			<%= comment.user.name %>：<%= comment.body %>
			<% if comment.user == current_user %>
				<%= link_to "削除", post_comment_path(comment.post, comment), method: :delete %>
			<% end %>
			</li>
	</div>
	</ol>
<% end %>

<div style="text-align: center; margin-top: 20px;">
	<% if user_signed_in? %>
		<%= form_for [@post, @comment] do |f| %>
			<%= f.text_area :body, placeholder:"コメントをどうぞ", size: "80px" %><br>
			<%= f.submit "送信する" %>
		<% end %>
	<% end %>
</div>
